<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPS vs. TD: Team Competition</title>
    <style>
        :root {
            --team1-color: #3498db; /* Blue */
            --team2-color: #e74c3c; /* Red */
            --success-color: #2ecc71; /* Green */
            --danger-color: #f39c12; /* Yellow/Orange */
        }
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f7f9;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 700px;
            width: 90%;
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        /* --- Scoreboard & Setup Styles --- */
        #setup-box, .scoreboard {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: #ecf0f1;
        }

        .scoreboard {
            display: flex;
            justify-content: space-around;
            font-size: 1.2em;
            font-weight: bold;
        }

        .team-score {
            padding: 10px 15px;
            border-radius: 5px;
            width: 45%;
        }
        
        #team1-score { background-color: var(--team1-color); color: white; }
        #team2-score { background-color: var(--team2-color); color: white; }
        
        #setup-box input {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 150px;
        }
        
        #setup-box button {
            background-color: var(--success-color);
            color: white;
        }
        
        /* --- Quiz & Timer Styles --- */
        #question-box {
            background-color: #34495e;
            color: white;
            padding: 25px;
            border-radius: 8px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
        }

        #timer-display {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--danger-color);
            margin-bottom: 15px;
        }

        .game-buttons-container {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        button {
            padding: 12px 20px;
            font-size: 1.1em;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        
        /* Ready Button */
        #ready-btn {
            background-color: var(--team1-color);
            color: white;
            width: 100%;
        }
        #ready-btn:hover { background-color: #2980b9; }

        /* Scoring Controls */
        #scoring-controls {
            display: none; /* Hidden until answering starts */
            border-top: 1px solid #ccc;
            padding-top: 20px;
            margin-top: 20px;
            justify-content: space-around;
        }
        
        .score-column {
            width: 45%;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .score-column button { width: 100%; }

        .correct-btn { background-color: var(--success-color); color: white; }
        .correct-btn:hover { background-color: #27ad60; }
        .incorrect-btn { background-color: var(--danger-color); color: white; }
        .incorrect-btn:hover { background-color: #c47c0f; }

        /* Feedback Box */
        #feedback-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            min-height: 50px;
        }

        .correct-fb {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .incorrect-fb {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>🧠 EPS vs. TD: Team Showdown</h1>

        <div id="setup-box">
            <input type="text" id="team1-name-input" value="Team Alpha" placeholder="Enter Team 1 Name">
            <input type="text" id="team2-name-input" value="Team Beta" placeholder="Enter Team 2 Name">
            <button id="start-setup-btn" onclick="setupGame()">Start Game</button>
        </div>

        <div class="scoreboard" style="display: none;">
            <div class="team-score" id="team1-score"><span id="team1-name"></span>: <span id="team1-points">0</span></div>
            <div class="team-score" id="team2-score"><span id="team2-name"></span>: <span id="team2-points">0</span></div>
        </div>

        <div id="timer-display">Ready to Start!</div>
        <div id="question-box">Click 'Ready' when both teams are set for the question.</div>

        <button id="ready-btn" onclick="startQuestion()" style="display: none;">Ready for Question 1 / 9</button>
        <button id="next-btn" onclick="nextQuestion()" style="display: none;">Next Question</button>

        <div id="scoring-controls" class="game-buttons-container">
            <div class="score-column">
                <h3 id="score-team1-name">Team Alpha</h3>
                <button class="correct-btn" onclick="scoreAnswer(1, true)">Correct (Fact)</button>
                <button class="correct-btn" onclick="scoreAnswer(1, false)">Correct (Fiction)</button>
                <button class="incorrect-btn" onclick="scoreAnswer(1, null)">Incorrect</button>
            </div>
            <div class="score-column">
                <h3 id="score-team2-name">Team Beta</h3>
                <button class="correct-btn" onclick="scoreAnswer(2, true)">Correct (Fact)</button>
                <button class="correct-btn" onclick="scoreAnswer(2, false)">Correct (Fiction)</button>
                <button class="incorrect-btn" onclick="scoreAnswer(2, null)">Incorrect</button>
            </div>
        </div>

        <div id="feedback-box"></div>
    </div>

    <script>
        const quizQuestions = [
            {
                statement: "Extrapyramidal side effects (EPS) typically develop after months or years of medication exposure.",
                answer: false, // Fiction
                explanation: "FICTION. $\\text{EPS}$ can occur **acutely** (days to weeks). $\\text{TD}$ typically develops after months or years of exposure."
            },
            {
                statement: "Tardive Dyskinesia (TD) is primarily caused by **acute** dopamine $\\text{D}_2$ receptor blockade in the nigrostriatal pathway.",
                answer: false, // Fiction
                explanation: "FICTION. **$\\text{EPS}$** is due to acute blockade. $\\text{TD}$ is thought to result from **chronic** blockade causing receptor supersensitivity."
            },
            {
                statement: "Akathisia is an $\\text{EPS}$ symptom characterized by subjective and objective restlessness.",
                answer: true, // Fact
                explanation: "FACT. Akathisia is a common $\\text{EPS}$. It may respond to **beta-blockers** (e.g., propranolol) or benzodiazepines."
            },
            {
                statement: "Involuntary, repetitive movements, most often affecting the mouth, face, and tongue, are characteristic of $\\text{Tardive Dyskinesia (TD)}$.",
                answer: true, // Fact
                explanation: "FACT. These involuntary movements are the hallmark of $\\text{TD}$. $\\text{EPS}$ symptoms are different (e.g., tremor, rigidity, sustained contractions)."
            },
            {
                statement: "The first-line management for acute dystonia (a type of $\\text{EPS}$) is switching the patient to an $\\text{SGA}$ like clozapine.",
                answer: false, // Fiction
                explanation: "FICTION. First-line is often dose reduction or switching to a lower risk agent. For acute dystonia, **anticholinergic agents** (e.g., benztropine) are immediately effective."
            },
            {
                statement: "VMAT2 inhibitors (e.g., valbenazine) are the recommended first-line pharmacological treatment for moderate to severe $\\text{TD}$.",
                answer: true, // Fact
                explanation: "FACT. $\\text{VMAT2}$ inhibitors are the gold standard pharmacological treatment for $\\text{TD}$. "
            },
            {
                statement: "Parkinsonism (tremor, rigidity, bradykinesia) is classified as an $\\text{EPS}$.",
                answer: true, // Fact
                explanation: "FACT. Parkinsonism is a classic $\\text{EPS}$ resulting from dopamine blockade, which creates a syndrome similar to idiopathic Parkinson's disease."
            },
            {
                statement: "Anticholinergic agents (e.g., benztropine) can be used as a primary treatment to reduce the symptoms of $\\text{Tardive Dyskinesia}$.",
                answer: false, // Fiction
                explanation: "FICTION. Anticholinergics should be **avoided** in $\\text{TD}$ as they can potentially worsen the symptoms."
            },
            {
                statement: "Vitamin $\\text{E}$ is considered the most robust and highly recommended first-line agent for $\\text{TD}$.",
                answer: false, // Fiction
                explanation: "FICTION. $\\text{VMAT2}$ inhibitors are first-line. Vitamin $\\text{E}$ may have modest benefit but evidence is less robust."
            }
        ];

        let currentQuestionIndex = 0;
        const totalQuestions = quizQuestions.length;
        let teams = [
            { name: "Team Alpha", score: 0, id: 1 },
            { name: "Team Beta", score: 0, id: 2 }
        ];
        let timerId;
        const READ_TIME = 5; // seconds to read the question
        const ANSWER_TIME = 10; // seconds to answer

        // DOM elements
        const setupBox = document.getElementById('setup-box');
        const scoreboard = document.querySelector('.scoreboard');
        const team1NameInput = document.getElementById('team1-name-input');
        const team2NameInput = document.getElementById('team2-name-input');
        const team1NameDisplay = document.getElementById('team1-name');
        const team2NameDisplay = document.getElementById('team2-name');
        const team1PointsDisplay = document.getElementById('team1-points');
        const team2PointsDisplay = document.getElementById('team2-points');
        const scoreTeam1NameHeader = document.getElementById('score-team1-name');
        const scoreTeam2NameHeader = document.getElementById('score-team2-name');

        const questionBox = document.getElementById('question-box');
        const timerDisplay = document.getElementById('timer-display');
        const readyBtn = document.getElementById('ready-btn');
        const nextBtn = document.getElementById('next-btn');
        const scoringControls = document.getElementById('scoring-controls');
        const feedbackBox = document.getElementById('feedback-box');


        function updateScoreboard() {
            team1NameDisplay.textContent = teams[0].name;
            team2NameDisplay.textContent = teams[1].name;
            team1PointsDisplay.textContent = teams[0].score;
            team2PointsDisplay.textContent = teams[1].score;
            scoreTeam1NameHeader.textContent = teams[0].name;
            scoreTeam2NameHeader.textContent = teams[1].name;
        }

        function setupGame() {
            // Set team names from input
            teams[0].name = team1NameInput.value || "Team Alpha";
            teams[1].name = team2NameInput.value || "Team Beta";
            
            // Hide setup, show game elements
            setupBox.style.display = 'none';
            scoreboard.style.display = 'flex';
            readyBtn.style.display = 'block';

            // Reset game state
            currentQuestionIndex = 0;
            teams[0].score = 0;
            teams[1].score = 0;
            readyBtn.textContent = `Ready for Question 1 / ${totalQuestions}`;
            questionBox.textContent = "Click 'Ready' when both teams are set for the question.";
            timerDisplay.textContent = "Game started!";
            feedbackBox.textContent = '';
            feedbackBox.className = '';

            updateScoreboard();
        }


        function startQuestion() {
            if (currentQuestionIndex >= totalQuestions) {
                endGame();
                return;
            }

            const q = quizQuestions[currentQuestionIndex];
            
            // Reset for new question
            clearTimeout(timerId);
            nextBtn.style.display = 'none';
            readyBtn.style.display = 'none';
            scoringControls.style.display = 'none';
            feedbackBox.textContent = '';
            feedbackBox.className = '';
            
            // PHASE 1: Reading Timer (5 seconds)
            let readTimeLeft = READ_TIME;
            questionBox.textContent = q.statement;
            
            const readingCountdown = () => {
                if (readTimeLeft <= 0) {
                    // PHASE 2: Answering Timer (10 seconds)
                    startAnswerPhase();
                    return;
                }
                timerDisplay.textContent = `Time to Read: ${readTimeLeft} seconds...`;
                readTimeLeft--;
                timerId = setTimeout(readingCountdown, 1000);
            };

            readingCountdown();
        }

        function startAnswerPhase() {
            const q = quizQuestions[currentQuestionIndex];
            questionBox.textContent = "FACT or FICTION?"; // Show the prompt
            scoringControls.style.display = 'flex';
            
            let answerTimeLeft = ANSWER_TIME;
            
            const answerCountdown = () => {
                if (answerTimeLeft < 0) {
                    timerDisplay.textContent = "TIME'S UP! Score the answer.";
                    // Time up, but keep controls visible for scoring
                    return;
                }
                timerDisplay.textContent = `Time to Answer: ${answerTimeLeft} seconds`;
                answerTimeLeft--;
                timerId = setTimeout(answerCountdown, 1000);
            };

            answerCountdown();
        }

        function scoreAnswer(teamId, isCorrectAnswer) {
            clearTimeout(timerId); // Stop the timer

            const q = quizQuestions[currentQuestionIndex];
            const team = teams[teamId - 1];
            
            // Check if the stated answer (Fact/Fiction) matches the actual answer
            const isCorrect = isCorrectAnswer === q.answer;

            if (isCorrectAnswer === null) {
                // Incorrect: Just show feedback, no score change
                feedbackBox.textContent = `❌ Incorrect. The correct answer is ${q.answer ? 'FACT' : 'FICTION'}. ${q.explanation}`;
                feedbackBox.className = 'incorrect-fb';
            } else if (isCorrect) {
                // Correct Answer
                team.score++;
                feedbackBox.textContent = `✅ ${team.name} scores a point! The answer is ${q.answer ? 'FACT' : 'FICTION'}. ${q.explanation}`;
                feedbackBox.className = 'correct-fb';
            } else {
                // Wrong Answer (but points awarded based on click)
                feedbackBox.textContent = `❌ ${team.name} answered with the wrong choice! The correct answer is ${q.answer ? 'FACT' : 'FICTION'}. ${q.explanation}`;
                feedbackBox.className = 'incorrect-fb';
            }
            
            questionBox.textContent = q.statement; // Redisplay the full question
            timerDisplay.textContent = "Answer Scored. Click Next Question.";
            scoringControls.style.display = 'none';
            nextBtn.style.display = 'block';

            updateScoreboard();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            readyBtn.textContent = `Ready for Question ${currentQuestionIndex + 1} / ${totalQuestions}`;

            if (currentQuestionIndex < totalQuestions) {
                readyBtn.style.display = 'block';
                nextBtn.style.display = 'none';
                questionBox.textContent = "Click 'Ready' when both teams are set for the next question.";
                timerDisplay.textContent = "Next question is ready.";
            } else {
                endGame();
            }
        }

        function endGame() {
            readyBtn.style.display = 'none';
            nextBtn.style.display = 'none';
            
            const winner = teams[0].score > teams[1].score ? teams[0].name : 
                            (teams[1].score > teams[0].score ? teams[1].name : "It's a tie!");
            
            questionBox.innerHTML = `GAME OVER! ${winner === "It's a tie!" ? winner : winner + ' wins!'} <br>Final Score: ${teams[0].score} - ${teams[1].score}`;
            timerDisplay.textContent = "Final Results";
            feedbackBox.textContent = 'Thank you for playing! Click "Start Game" above to play again.';
            feedbackBox.className = 'correct-fb';
            
            // Show setup button again to allow replay
            document.getElementById('start-setup-btn').textContent = "Start New Game";
            setupBox.style.display = 'block';
        }

        // Initial setup on load
        updateScoreboard();
        document.getElementById('start-setup-btn').textContent = "Start Game";
    </script>

</body>
</html>
